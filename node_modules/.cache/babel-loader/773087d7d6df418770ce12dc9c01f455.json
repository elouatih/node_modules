{"ast":null,"code":"import _classCallCheck from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Style from\"./Updating.module.scss\";import ImageUp from\"./up.png\";import ImageDown from\"./down.png\";import ImageArgent from\"./argent.png\";import ImageTemps from\"./montre_circulaire.png\";import Header from\"../Header/Header\";import formationId from\"../utils/formationId\";import MenuRight from\"../MenuRight/MenuRight\";import{socket}from\"../../socket\";import calculateTime from\"../utils/calculateTime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Updating=/*#__PURE__*/function(_Component){_inherits(Updating,_Component);var _super=_createSuper(Updating);function Updating(props){var _this;_classCallCheck(this,Updating);_this=_super.call(this,props);_this.state={colonnes:[\"col-sm-12\",\"col-sm-6\",\"col-sm-4\",\"col-sm-3\"],imageUt:_this.props.oldUt>=0?ImageUp:ImageDown,imageUb:_this.props.oldUb>=0?ImageUp:ImageDown,timer:[],resources:[],competences:[]//isOn: false\n};//setTimeout( () => {this.setState({isOn: true})}, 5)\nreturn _this;}/*setTimer = () => {\n        socket.emit(\"getTimerUpdating\", (response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n    }*/_createClass(Updating,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket.emit(\"getTimerUpdating\",function(response){console.log(response);console.log(calculateTime(response));_this2.setState({timer:calculateTime(response)});console.log(\"State : \",_this2.state.timer);});socket.emit(\"getStats\",this.props.pseudo,function(response){console.log(response[0]);var resources=[response[0].ut,response[0].ub];var competences=[response[0].Polyculture,response[0].Verger,response[0].Bauvage,response[0].Marechage];_this2.setState({competences:competences});_this2.setState({resources:resources});});}},{key:\"nombreElements\",value:function nombreElements(){var indice=0;for(var i=0;i<4;i++){if(this.state.competences[i]!==0){indice+=1;}}return indice;}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{tour:this.props.tour,pseudo:this.props.pseudo,bassin:this.props.bassin,role:this.props.role,numeroPhase:1,h:this.state.timer[0],m:this.state.timer[1],s:this.state.timer[2],finishEvent:this.props.onClickEvent}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-2\",children:/*#__PURE__*/_jsx(MenuRight,{role:this.props.role,pseudo:this.props.pseudo})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-10\",children:[/*#__PURE__*/_jsxs(\"section\",{className:Style.Updating,children:[\"Vos ressources au d\\xE9but du tour :\",/*#__PURE__*/_jsxs(\"div\",{className:\"row text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"h2\",{className:Style.TextColor,children:[/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:ImageArgent}),\" UB : \",this.state.resources[1],\" \",/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:this.state.imageUb}),\" \",this.props.oldUb]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"h2\",{className:Style.TextColor,children:[/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:ImageTemps}),\" UT : \",this.state.resources[0],\" \",/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:this.state.imageUt}),\" \",this.props.oldUt]})})]}),this.props.role===1?/*#__PURE__*/_jsxs(\"div\",{children:[\"Vos niveaux de comp\\xE9tence :\",/*#__PURE__*/_jsx(\"div\",{className:\"row text-center\",children:this.state.competences.map(function(f,index){if(f!==0){return/*#__PURE__*/_jsxs(\"div\",{className:_this3.state.colonnes[_this3.nombreElements(_this3.state.competences)-1],children:[/*#__PURE__*/_jsxs(\"p\",{className:Style.TextColor,children:[\" \",formationId(index),\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:Style.TextDecor,children:[\" \",f,\" \"]})]});}})})]}):null]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.props.onClickEvent,className:\"btn btn-small btn-primary\",children:\"Next\"})]})]})]});}}]);return Updating;}(Component);export{Updating as default};","map":{"version":3,"sources":["/home/elouati/Bureau/projet_working/client/src/Interface/Updating/Updating.js"],"names":["React","Component","Style","ImageUp","ImageDown","ImageArgent","ImageTemps","Header","formationId","MenuRight","socket","calculateTime","Updating","props","state","colonnes","imageUt","oldUt","imageUb","oldUb","timer","resources","competences","emit","response","console","log","setState","pseudo","ut","ub","Polyculture","Verger","Bauvage","Marechage","indice","i","tour","bassin","role","onClickEvent","TextColor","Image","map","f","index","nombreElements","TextDecor"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport Style from \"./Updating.module.scss\";\nimport ImageUp from \"./up.png\";\nimport ImageDown from \"./down.png\";\nimport ImageArgent from \"./argent.png\";\nimport ImageTemps from \"./montre_circulaire.png\";\nimport Header from \"../Header/Header\";\nimport formationId from \"../utils/formationId\";\nimport MenuRight from \"../MenuRight/MenuRight\";\nimport {socket} from \"../../socket\";\nimport calculateTime from \"../utils/calculateTime\";\n\n\nexport default class Updating extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            colonnes: [\"col-sm-12\", \"col-sm-6\", \"col-sm-4\", \"col-sm-3\"],\n            imageUt: (this.props.oldUt >= 0) ? ImageUp : ImageDown,\n            imageUb: (this.props.oldUb >= 0) ? ImageUp : ImageDown,\n            timer: [],\n            resources: [],\n            competences: []\n            //isOn: false\n        }\n\n        //setTimeout( () => {this.setState({isOn: true})}, 5)\n    }\n\n    /*setTimer = () => {\n        socket.emit(\"getTimerUpdating\", (response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n    }*/\n\n    componentDidMount() {\n        socket.emit(\"getTimerUpdating\", (response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n\n        socket.emit(\"getStats\", this.props.pseudo, (response) => {\n            console.log(response[0]);\n            const resources = [response[0].ut, response[0].ub]\n            const competences = [response[0].Polyculture, response[0].Verger,\n                    response[0].Bauvage, response[0].Marechage];\n            this.setState({competences});\n            this.setState({resources})\n        })\n    }\n\n    nombreElements() {\n        var indice = 0;\n        for(var i = 0; i < 4; i++){\n            if(this.state.competences[i] !== 0) {\n                indice += 1;\n            }\n        }\n        return indice;\n    }\n\n\n\n    render() {\n        return (\n            <>\n                <Header tour={this.props.tour} pseudo={this.props.pseudo} bassin={this.props.bassin} role={this.props.role} numeroPhase={1} h={this.state.timer[0]} m={this.state.timer[1]} s={this.state.timer[2]}\n                    finishEvent={this.props.onClickEvent}/>\n                <div className=\"row\">\n                    <div className=\"col-sm-2\">\n                        <MenuRight role={this.props.role} pseudo={this.props.pseudo}/>\n                    </div>\n                    <div className=\"col-sm-10\">\n                        <section className={Style.Updating}>\n                            Vos ressources au début du tour :\n                            <div className=\"row text-center\">\n                                <div className=\"col-sm-6\">\n                                    <h2 className={Style.TextColor}>\n                                        <img className={Style.Image} src={ImageArgent}/> UB : {this.state.resources[1]} <img className={Style.Image} src={this.state.imageUb}/> {this.props.oldUb}\n                                    </h2>\n                                </div>\n                                <div className=\"col-sm-6\">\n                                    <h2 className={Style.TextColor}>\n                                        <img className={Style.Image} src={ImageTemps}/> UT : {this.state.resources[0]} <img className={Style.Image} src={this.state.imageUt}/> {this.props.oldUt}\n                                    </h2>\n                                </div>\n                            </div>\n                            {this.props.role === 1 ? (<div>Vos niveaux de compétence :\n                                <div className={\"row text-center\"}>{this.state.competences.map((f, index) =>\n                                    {if (f !== 0){\n                                        return (<div className={this.state.colonnes[this.nombreElements(this.state.competences)-1]}>\n                                            <p className={Style.TextColor}> {formationId(index)} </p>\n                                            <p className={Style.TextDecor}> {f} </p>\n                                        </div>  )\n                                    }}\n                                )}</div></div>) : null}\n                        </section>\n                        <button onClick={this.props.onClickEvent} className={\"btn btn-small btn-primary\"}>Next</button>\n                    </div>\n                </div>\n            </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}