{"ast":null,"code":"import _slicedToArray from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useContext}from'react';import{generateHexes,generateRivers,getSubBassin}from\"./map/MapUtil.js\";import Bassin from\"./map/Bassin.js\";import ActivitySwapper from\"./controls/ActivitySwapper.js\";import ValidationTour from\"./controls/ValidationTour.js\";import handleClickTileFarmer from'./controls/handleClickTileFarmer.js';import Chat from\"./Chat.js\";import{socket}from\"../socket.js\";import Ressources from\"./controls/Ressources.js\";import'../index.css';import SlideField from\"./controls/SlideField.js\";import Menu from\"./controls/Menu.js\";import Diary from\"./Diary.js\";import roleToString from'../Interface/utils/roleToString';import{Button}from'@material-ui/core';import Updating from\"../Interface/Updating/Updating\";import{nameSubBassin}from\"./map/MapUtil.js\";import MenuContext from\"../Menu/menu-context\";import InterfaceContext from\"./interface-context\";import Strategy from\"../Interface/Strategy/Strategy\";import Events from\"../Interface/Events/Events\";import Debriefing from\"../Interface/Debriefing/Debriefing\";import Style from\"../Interface/Strategy/Strategy.module.scss\";import Pratiques from\"../Interface/ActionChoice/Pratiques\";import DetailsParcelle from\"../Interface/ActionChoice/DetailsParcelle\";import Header from\"../Interface/Header/Header\";import MenuRight from\"../Interface/MenuRight/MenuRight\";import StylePratique from\"../Interface/ActionChoice/Pratiques.module.scss\";import Results from\"../Interface/Results/Results\";import Satisfaction from\"../Interface/Satisfaction/Satisfaction\";import calculateTime from\"../Interface/utils/calculateTime\";import TimerContext from\"./animator/timers-context\";import timersDefault from\"./TimersDefault\";import idFromArray from\"../Interface/utils/idFromArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Conteneur=/*#__PURE__*/function(_React$Component){_inherits(Conteneur,_React$Component);var _super=_createSuper(Conteneur);/* \n        Input : props={name,role}\n                name : string : player's name\n                role : number : player's name\n\n        Syntax : <Game name={name} role={role} />\n    */function Conteneur(props){var _this;_classCallCheck(this,Conteneur);_this=_super.call(this,props);//this.changeTileActivity = this.changeTileActivity.bind(this)\n_this.changeTileActivity=function(value,changeAll){var hexagons=_this.state.map.moreHexas;if(changeAll){var newAction={};var newCost={};var player=_this.state.id;//const player = hexagons[this.state.selectedTile.id].player\nObject.values(hexagons).forEach(function(hex){if(hex.player===player){hex.modified=true;newAction[hex.Id]=value.Id;newCost[hex.Id]={ub:value.Intrants,ut:value.Travail};}});_this.setState({actions:newAction,cost:newCost});}else{var cost=_this.state.cost;if(_this.state.selectedTile!==null&&_this.state.selectedTile.length!==0){for(var i=0;i<_this.state.selectedTile.length;i++){var _objectSpread2;cost[_this.state.selectedTile[i].id]={ub:value.Intrants,ut:value.Travail};_this.setState({actions:_objectSpread(_objectSpread({},_this.state.actions),{},(_objectSpread2={},_defineProperty(_objectSpread2,_this.state.selectedTile[i].id,value.Id),_defineProperty(_objectSpread2,\"cost\",cost),_objectSpread2))});hexagons[_this.state.selectedTile[i].id-1].modified=true;}}/*cost[this.state.selectedTile.id] = {ub: value.Intrants, ut: value.Travail}\n            this.setState({actions: {...this.state.actions, [this.state.selectedTile.id]: value.Id, cost}})\n            hexagons[this.state.selectedTile.id - 1].modified = true*/}_this.setState({map:_objectSpread(_objectSpread({},_this.state.map),{},{moreHexas:hexagons}),selectedTile:[]});/*\n                 fetch(\"https://formsubmit.co/ajax/b6d145cfd9512d53d10dd9f9a938ae75\", {\n                method: \"POST\",\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify({\n                    name: \"FormSubmit\",\n                    message: JSON.stringify(this.state.map.moreHexas[0])\n                })\n            })\n                .then(response => response.json())\n                .then(data => console.log(data))\n                .catch(error => console.log(error));\n        */};_this.receiveNewMap=function(response){var _generateHexes=generateHexes(response),_generateHexes2=_slicedToArray(_generateHexes,2),newHexas=_generateHexes2[0],lstTile=_generateHexes2[1];var newRivers=generateRivers(newHexas);_this.setState({map:_objectSpread(_objectSpread({},_this.state.map),{},{moreHexas:newHexas,moreRivers:newRivers}),lstTile:lstTile});};_this.calculateCosts=function(){var totalUt=0;var totalUb=0;{console.log(\"ACTIONS CHOISIES : \",_this.state.actions);}/*this.state.actions.map(item => {\n            if(item !== null){\n                totalUb += item.cost.ub;\n                totalUt += item.cost.ut;\n            }\n        })*/ //console.log(\"costs = \", this.state.actions.cost)\nfor(var index in _this.state.actions.cost){//console.log(this.state.actions.cost[index])\ntotalUt+=_this.state.actions.cost[index].ut;totalUb+=_this.state.actions.cost[index].ub;}//console.log(\"RESOURCES UT = \", this.state.resources[0])\n//console.log(\"RESOURCES UB = \", this.state.resources[1])\n//console.log(\"UT = \" + totalUt + \" UB = \" + totalUb)\nreturn[totalUt,totalUb];};_this.handleSubmit=function(){var totalUt=0;var totalUb=0;{console.log(\"ACTIONS CHOISIES : \",_this.state.actions);}/*this.state.actions.map(item => {\n            if(item !== null){\n                totalUb += item.cost.ub;\n                totalUt += item.cost.ut;\n            }\n        })*/ //console.log(\"costs = \", this.state.actions.cost)\nfor(var index in _this.state.actions.cost){//console.log(this.state.actions.cost[index])\ntotalUt+=_this.state.actions.cost[index].ut;totalUb+=_this.state.actions.cost[index].ub;}//console.log(\"RESOURCES UT = \", this.state.resources[0])\n//console.log(\"RESOURCES UB = \", this.state.resources[1])\n//console.log(\"UT = \" + totalUt + \" UB = \" + totalUb)\ntotalUt=_this.state.resources[0]-totalUt;totalUb=_this.state.resources[1]-totalUb;//console.log(\"new UT = \" + totalUt + \" new UB = \" + totalUb)\n/*this.setState({\n            totalUt: totalUt,\n            totalUb: totalUb\n        })*/ //console.log(\"new UT = \" + this.state.totalUt + \" new UB = \" + this.state.totalUb)\n//console.log(\"FINAL TOTAL UT \" + this.state.totalUt + \" UB \" + this.state.totalUb)\nsocket.emit(\"setPlayersResources\",totalUt,totalUb);_this.setState({interfaceCtx:4});};_this.endRound=function(){_this.setState({fini:true,action:{}});};_this.closeDiary=function(){_this.setState({displayDiary:false});};_this.displayDiary=function(){_this.setState({displaySlider:false,displayDiary:true});};_this.finishTour=function(){socket.emit(\"finishTour\",_this.state.id,true,function(response){console.log(\"Finish Tour : \",_this.state.id);});//this.setState({interfaceCtx: 7});\n};_this.handleClickTile=handleClickTileFarmer.bind(_assertThisInitialized(_this));//this.a = this.a.bind(this)\n_this.state={map:{moreHexas:\"\",moreRivers:null},selectedTile:[],HexasTampon:null,cost:{},tour:0,fini:false,actions:{},timer:[],allCostsUt:[],allCostsUb:[],lstConvo:{},displayDiary:false,disconnected:false,displaySlider:false,inputPhase:true,interfaceCtx:1,selectedTilePractise:0,competences:[],resources:[],totalUt:0,totalUb:0,pTimers:false};return _this;}_createClass(Conteneur,[{key:\"createTampon\",value://timers = useContext(TimerContext);\n/*\n        Function : createTampon\n    \n        Syntax  : HexasTampon=createTampon(moreHexas)\n        \n        Input   : moreHexas : object containing data to create hexagons\n            \n        Outputs : HexasTampon : a copy of moreHexas containing a subset of entries\n    \n        Description : \n            create a copy of moreHexas containing a subset of entries of moreHexas.\n            the remaining entries are those the players can change directly.\n\n        Author : Hugo KELHETTER\n    --------------------------------------------------------------------------------------------------------\n    not in current use\n    --------------------------------------------------------------------------------------------------------\n    */function createTampon(moreHexas,player){var HexasTampon={};for(var key in moreHexas){if(moreHexas[key].player===player){var hex={};hex.activity=moreHexas[key].activity;hex.player=moreHexas[key].player;HexasTampon[key]=hex;}}return HexasTampon;}/* \n        Function : updateMap\n    \n        Syntax  : updateMap(newData)\n                \n        Input   : object containing the data to update the state\n            \n        Description : update the state of the map with new data received from the server. call createTampon automatically\n        \n        Author : Hugo KELHETTER\n    */},{key:\"updateMap\",value:function updateMap(newData){var newHexas={};for(var index in newData){var newValues=this.state.map.moreHexas;for(var key in newData[index]){newValues[key]=newData[index][key];}newHexas[index]=newValues;}this.setState({moreHexas:newHexas,cost:{}});//this.createTampon(this.state.map.moreHexas, this.state.map.player)\n}/*\n        Function : changeTileActivity\n    \n        Syntax\n            changeTileActivity(value,changeAll)\n                \n        Input\n            value       :new value for the selectedTile's activity\n            changeAll   :false:only change the selectedTile's activity\n                        :true :change all tiles from the player\n    \n        Description\n            updates the state in 2 ways:\n                changes the selectedTile or all tiles depending on the value of changeAll\n                set the state value of selectedTile to null  \n                \n        Author : Hugo KELHETTER\n    */},{key:\"componentDidMount\",value:/*\n        Function : componentDidMount\n    \n        Description : subscribe to the required function from server to keep up to date\n\n        Author : Hugo KELHETTER\n            \n    */function componentDidMount(){var _this2=this;socket.emit(\"getTurn\",function(response){_this2.setState({tour:response});});socket.emit(\"getTimer\",3,function(response){console.log(response);console.log(calculateTime(response));_this2.setState({timer:calculateTime(response)});console.log(\"State : \",_this2.state.timer);});socket.emit(\"getSettings\",function(response){console.log(\"GET SETTINGS = \",response[0].pTimer);_this2.setState({pTimers:response[0].pTimer===1});console.log(\"state settings = \",_this2.state.pTimers);});socket.emit(\"getStats\",this.props.name,function(response){console.log(response[0]);var resources=[response[0].ut,response[0].ub];var competences=[response[0].GCultures,response[0].Verger,response[0].BovinV,response[0].Viticulture,response[0].BovinL,response[0].Granivore];//this.setState({competences, resources})\n_this2.setState({competences:competences,resources:resources});//console.log(calculateTime(response));\n//this.setState({timer: calculateTi, me(response)});\n//console.log(\"State : \", this.state.timer);\n});/*socket.emit(\"getPlayerActivity\", this.state.id, (response) => {\n            console.log(\"GET PLAYER ACTIVITY IS : \", response);\n        })*/socket.on(\"disconnect\",function(){_this2.setState({disconnected:true});});socket.on(\"connect\",function(){if(_this2.state.disconnected){socket.emit('reconnect',_this2.props.room,_this2.props.name,function(){_this2.setState({disconnected:false});});}});if(this.props.role<10){socket.emit(\"updateStats\",function(response){_this2.setState({ressources:response[0]});});}socket.on(\"results\",function(response){_this2.setState({ressources:response.stats,data:response.graph,fini:false,displaySlider:true,inputPhase:false});socket.emit(\"getTurn\",function(response){_this2.setState({tour:response});});_this2.setState({actions:{}});socket.emit(\"getCurrentGrid\",function(response){_this2.receiveNewMap(response);});//    this.setState({ ressources: response[0] })\n});/*  socket.emit(\"createRoom\", \"player1\", 0, (responseCreateRoom) => {\n             this.setState({ room: responseCreateRoom })\n             socket.emit(\"startGame\")*/socket.on(\"inputPhase\",function(){console.log(\"aaaaaaaa\");socket.emit(\"getCurrentGrid\",function(response){_this2.receiveNewMap(response);/*             const [newHexas, lstTile] = generateHexes(response)\n                            const newRivers = generateRivers(newHexas)\n                            this.setState({ map: { ...this.state.map, moreHexas: newHexas, moreRivers: newRivers }, lstTile })\n                 */});_this2.setState({inputPhase:true});});socket.emit(\"getCurrentGrid\",function(response){_this2.receiveNewMap(response);/*             const [newHexas, lstTile] = generateHexes(response)\n                        const newRivers = generateRivers(newHexas)\n                        this.setState({ map: { ...this.state.map, moreHexas: newHexas, moreRivers: newRivers }, lstTile })\n             */});socket.emit(\"getAllActions\",function(response){_this2.setState({lstActions:response});});socket.emit(\"playersInRoom\",function(response){var player=response.filter(function(player,i){return player.Name===_this2.props.name;});_this2.setState({lstPlayer:response,id:player[0].Id});//})\n});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){socket.removeAllListeners();}},{key:\"openTuto\",value:function openTuto(){window.open(\"\".concat(window.location.href,\"tutorial?tuto=3\"));}},{key:\"displaySlideField\",value:function displaySlideField(){return/*#__PURE__*/_jsx(SlideField,{name:this.props.name,displayDiary:this.displayDiary});}},{key:\"actionChoice\",value:function actionChoice(){var _this3=this,_this$state$selectedT,_this$state$lstAction,_this$state$selectedT2;var costs=this.calculateCosts();//console.log(this.state.inputPhase)\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{tour:this.state.tour,role:this.props.role,pseudo:this.props.name,bassin:nameSubBassin(getSubBassin(this.state.id)),numeroPhase:3,h:this.state.pTimers?this.state.timer[0]:timersDefault(3)[0],m:this.state.pTimers?this.state.timer[1]:timersDefault(3)[1],s:this.state.pTimers?this.state.timer[2]:timersDefault(3)[2],finishEvent:function finishEvent(){_this3.setState({interfaceCtx:4});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-2\",children:/*#__PURE__*/_jsx(MenuRight,{ut:23,ub:33,formations:[],role:this.props.role,pseudo:this.props.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[console.log(\"ID ARRAYS = \",idFromArray(this.state.selectedTile)),Object.keys(this.state.lstConvo).length>0?/*#__PURE__*/_jsx(Chat,{lstConvo:this.state.lstConvo}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"section\",{children:this.state.map.moreHexas!==\"\"&&/*#__PURE__*/_jsx(Bassin,{handleClick:this.handleClickTile,map:this.state.map,role:this.props.role,selectedId:idFromArray(this.state.selectedTile),id:this.state.id})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[console.log(this.state.actions),/*#__PURE__*/_jsx(DetailsParcelle,{id:(_this$state$selectedT=this.state.selectedTile[this.state.selectedTile.length-1])===null||_this$state$selectedT===void 0?void 0:_this$state$selectedT.practice,currentActivity:(_this$state$lstAction=this.state.lstActions[((_this$state$selectedT2=this.state.selectedTile[this.state.selectedTile.length-1])===null||_this$state$selectedT2===void 0?void 0:_this$state$selectedT2.practice)-101])===null||_this$state$lstAction===void 0?void 0:_this$state$lstAction.Pratique}),this.state.selectedTile===null||this.state.selectedTile.length===0?null:/*#__PURE__*/_jsx(\"section\",{className:StylePratique.classNameSection,onClick:function onClick(){_this3.setState({interfaceCtx:0});},children:/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Choisir une activit\\xE9\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"section\",{className:StylePratique.classNameSection,children:[/*#__PURE__*/_jsx(\"header\",{children:\"D\\xE9pense de ce tour\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"UT : \",costs[0]]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"UB : \",costs[1]]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:this.handleSubmit,children:\"Next\"})]})})]})]})})]})]});}/*\n        author : Hossam ELOUATI\n     */ /*< div className=\"App\" >\n                    {this.state.displayDiary &&\n                        <Diary nom={this.props.name} data={this.state.data} closeDiary={this.closeDiary} />}\n                    <Menu >\n                        {this.state.inputPhase ?\n                            <div id=\"menu\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={this.openTuto}>Aide</Button>\n                                <p>Nous sommes au tour : {this.state.tour}</p>\n                                <p>Bonjour {this.props.name}. Vous êtes {roleToString(this.props.role)}, votre identifiant est {this.state.id}</p>\n                                {this.state.ressources !== undefined && <Ressources ressources={this.state.ressources} cost={this.state.cost} />}\n                                {!this.state.fini ?\n                                    <>\n                                        {console.log(\"SELECTED TILE = \", this.state.selectedTile)}\n                                        {this.state.selectedTile === null ? \"\" :\n                                            <ActivitySwapper key=\"changeActivity\" changeTileActivity={this.changeTileActivity}\n                                                selectedTile={this.state.selectedTile} actions={this.state.lstActions} />\n                                        }\n                                        {console.log(\"LIST ACTIONS = \", this.state.lstActions)}\n                                        <ValidationTour key=\"validation\" endRound={this.endRound} tour={this.state.tour} actions={this.state.actions} />\n                                    </>\n                                    : \" En attente des autres joueurs...\"}\n                            </div> : \"L'animateur est en train de modifier la carte\"}\n                    </Menu>\n                    {Object.keys(this.state.lstConvo).length > 0 ? <Chat lstConvo={this.state.lstConvo} /> : \"\"}\n                    <div className=\"row\">\n                        <div className=\"col-sm-6\">\n                            {\n                                this.state.map.moreHexas !== \"\" && <Bassin handleClick={this.handleClickTile}\n                                                                           map={this.state.map} role={this.props.role} selectedId={this.state.selectedTile?.id} id={this.state.id} />\n                            }\n                        </div>\n                        <div className=\"col-sm-6\">\n                            <DetailsParcelle id={this.state.selectedTile?.practice} currentActivity={this.state.selectedTile?.name}/>\n                        </div>\n                    </div>\n\n\n                </div >*/},{key:\"pratiques\",value:function pratiques(){var _this4=this;return/*#__PURE__*/_jsx(Pratiques,{onClickEvent:function onClickEvent(){_this4.setState({interfaceCtx:3});},changeTileActivity:this.changeTileActivity,selectedTile:this.state.selectedTile,actions:this.state.lstActions,role:this.props.role,pseudo:this.props.name,competences:this.state.competences});}},{key:\"updating\",value:function updating(){var _this5=this;return/*#__PURE__*/_jsx(Updating,{ut:23,ub:3,oldUb:-1,oldUt:0,formations:[1,0,9,1],role:this.props.role,pseudo:this.props.name,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,h:timersDefault(1)[0],m:timersDefault(2)[1],s:timersDefault(3)[2],onClickEvent:function onClickEvent(){return _this5.setState({interfaceCtx:2});},pTimer:this.state.pTimers});}},{key:\"strategy\",value:function strategy(){var _this6=this;return/*#__PURE__*/_jsx(Strategy,{h:timersDefault(2)[0],m:timersDefault(2)[1],s:timersDefault(2)[2],role:this.props.role,listPlayers:[\"Hossam\",\"Rien\",\"Plus\",\"Au\",\"CR\"],pseudo:this.props.name,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,formations:[1,0,1,1],ut:23,ub:23,onClickEvent:function onClickEvent(){return _this6.setState({interfaceCtx:3});},pTimer:this.state.pTimers});}},{key:\"events\",value:function events(){var _this7=this;return/*#__PURE__*/_jsx(Events,{pseudo:this.props.name,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,formations:[1,0,1,1],indicateurs:[123,56],ut:23,ub:23,meteorology:[[0,1],[2,1],[2,3]],role:this.props.role,maladie:true,onClickEvent:function onClickEvent(){return _this7.setState({interfaceCtx:5});},h:timersDefault(4)[0],m:timersDefault(4)[1],s:timersDefault(4)[2],pTimer:this.state.pTimers});}},{key:\"debriefing\",value:function debriefing(){var _this8=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Debriefing,{h:timersDefault(5)[0],m:timersDefault(5)[1],s:timersDefault(5)[2],role:this.props.role,pseudo:this.props.name,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,onClickEvent:function onClickEvent(){return _this8.setState({interfaceCtx:6});},pTimer:this.state.pTimers})});}},{key:\"satisfaction\",value:function satisfaction(){var _this9=this;return/*#__PURE__*/_jsx(Satisfaction,{role:this.props.role,h:timersDefault(6)[0],m:timersDefault(6)[1],s:timersDefault(6)[2],pseudo:this.props.name,pTimer:this.state.pTimers,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,onClickEvent:this.finishTour,resultats:function resultats(){_this9.setState({interfaceCtx:7});}});}},{key:\"results\",value:function results(){var _this10=this;return/*#__PURE__*/_jsx(Results,{role:this.props.role,h:timersDefault(7)[0],m:timersDefault(7)[1],s:timersDefault(7)[2],data:this.state.data,pseudo:this.props.name,pTimer:this.state.pTimers,bassin:nameSubBassin(getSubBassin(this.state.id)),tour:this.state.tour,onClickEvent:function onClickEvent(){return _this10.setState({interfaceCtx:1});}});}},{key:\"render\",value:function render(){console.log(\"CONTEXT : \",this.context);return/*#__PURE__*/_jsx(_Fragment,{children:this.state.interfaceCtx===1?this.updating():/*#__PURE__*/_jsxs(\"div\",{children:[this.state.interfaceCtx===2&&this.strategy(),this.state.interfaceCtx===3&&this.actionChoice(),this.state.interfaceCtx===4&&this.events(),this.state.interfaceCtx===5&&this.debriefing(),this.state.interfaceCtx===6&&this.satisfaction(),this.state.interfaceCtx===7&&this.results(),this.state.interfaceCtx===0&&this.pratiques()]})});}}]);return Conteneur;}(React.Component);Conteneur.contextType=TimerContext;export default Conteneur;/*\n\ngarder activités des derniers tours\nconserver les noms durant les formulaires\n\n*/","map":{"version":3,"sources":["/home/elouati/Bureau/projet_working/client/src/Game/Game.js"],"names":["React","useContext","generateHexes","generateRivers","getSubBassin","Bassin","ActivitySwapper","ValidationTour","handleClickTileFarmer","Chat","socket","Ressources","SlideField","Menu","Diary","roleToString","Button","Updating","nameSubBassin","MenuContext","InterfaceContext","Strategy","Events","Debriefing","Style","Pratiques","DetailsParcelle","Header","MenuRight","StylePratique","Results","Satisfaction","calculateTime","TimerContext","timersDefault","idFromArray","Conteneur","props","changeTileActivity","value","changeAll","hexagons","state","map","moreHexas","newAction","newCost","player","id","Object","values","forEach","hex","modified","Id","ub","Intrants","ut","Travail","setState","actions","cost","selectedTile","length","i","receiveNewMap","response","newHexas","lstTile","newRivers","moreRivers","calculateCosts","totalUt","totalUb","console","log","index","handleSubmit","resources","emit","interfaceCtx","endRound","fini","action","closeDiary","displayDiary","displaySlider","finishTour","handleClickTile","bind","HexasTampon","tour","timer","allCostsUt","allCostsUb","lstConvo","disconnected","inputPhase","selectedTilePractise","competences","pTimers","key","activity","newData","newValues","pTimer","name","GCultures","Verger","BovinV","Viticulture","BovinL","Granivore","on","room","role","ressources","stats","data","graph","lstActions","filter","Name","lstPlayer","removeAllListeners","window","open","location","href","costs","keys","practice","Pratique","classNameSection","context","updating","strategy","actionChoice","events","debriefing","satisfaction","results","pratiques","Component","contextType"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react'\nimport {generateHexes, generateRivers, getSubBassin} from \"./map/MapUtil.js\"\nimport Bassin from \"./map/Bassin.js\"\nimport ActivitySwapper from \"./controls/ActivitySwapper.js\"\nimport ValidationTour from \"./controls/ValidationTour.js\"\nimport handleClickTileFarmer from './controls/handleClickTileFarmer.js'\nimport Chat from \"./Chat.js\"\nimport { socket } from \"../socket.js\"\nimport Ressources from \"./controls/Ressources.js\"\nimport '../index.css'\nimport PropTypes from 'prop-types';\nimport SlideField from \"./controls/SlideField.js\"\nimport Menu from \"./controls/Menu.js\"\nimport Diary from \"./Diary.js\"\nimport roleToString from '../Interface/utils/roleToString'\nimport { Button } from '@material-ui/core';\nimport Updating from \"../Interface/Updating/Updating\";\nimport {nameSubBassin} from \"./map/MapUtil.js\";\nimport MenuContext from \"../Menu/menu-context\";\nimport InterfaceContext from \"./interface-context\";\nimport Strategy from \"../Interface/Strategy/Strategy\";\nimport Events from \"../Interface/Events/Events\";\nimport Debriefing from \"../Interface/Debriefing/Debriefing\";\nimport Style from \"../Interface/Strategy/Strategy.module.scss\";\nimport Pratiques from \"../Interface/ActionChoice/Pratiques\";\nimport DetailsParcelle from \"../Interface/ActionChoice/DetailsParcelle\";\nimport Header from \"../Interface/Header/Header\";\nimport MenuRight from \"../Interface/MenuRight/MenuRight\";\nimport StylePratique from \"../Interface/ActionChoice/Pratiques.module.scss\";\nimport Results from \"../Interface/Results/Results\";\nimport Satisfaction from \"../Interface/Satisfaction/Satisfaction\";\nimport calculateTime from \"../Interface/utils/calculateTime\";\nimport TimerContext from \"./animator/timers-context\";\nimport timersDefault from \"./TimersDefault\";\nimport idFromArray from \"../Interface/utils/idFromArray\";\n\n\nclass Conteneur extends React.Component {\n    /* \n        Input : props={name,role}\n                name : string : player's name\n                role : number : player's name\n\n        Syntax : <Game name={name} role={role} />\n    */\n\n    static contextType = TimerContext\n\n    constructor(props) {\n        super(props)\n        //this.changeTileActivity = this.changeTileActivity.bind(this)\n        this.handleClickTile = handleClickTileFarmer.bind(this)\n        //this.a = this.a.bind(this)\n\n\n        this.state = {\n            map: {moreHexas: \"\", moreRivers: null},\n            selectedTile: [], HexasTampon: null,\n            cost: {},\n            tour: 0,\n            fini: false,\n            actions: {},\n            timer: [],\n            allCostsUt : [],\n            allCostsUb : [],\n            lstConvo: {},\n            displayDiary: false,\n            disconnected: false,\n            displaySlider: false,\n            inputPhase: true,\n            interfaceCtx: 1,\n            selectedTilePractise: 0,\n            competences: [],\n            resources: [],\n            totalUt: 0,\n            totalUb: 0,\n            pTimers: false\n        }\n    }\n\n    static propTypes = {\n        name: PropTypes.string.isRequired,\n        role: PropTypes.number.isRequired\n    }\n\n    //timers = useContext(TimerContext);\n    /*\n        Function : createTampon\n    \n        Syntax  : HexasTampon=createTampon(moreHexas)\n        \n        Input   : moreHexas : object containing data to create hexagons\n            \n        Outputs : HexasTampon : a copy of moreHexas containing a subset of entries\n    \n        Description : \n            create a copy of moreHexas containing a subset of entries of moreHexas.\n            the remaining entries are those the players can change directly.\n\n        Author : Hugo KELHETTER\n    --------------------------------------------------------------------------------------------------------\n    not in current use\n    --------------------------------------------------------------------------------------------------------\n    */\n    createTampon(moreHexas, player) {\n\n        let HexasTampon = {}\n        for (const key in moreHexas) {\n            if (moreHexas[key].player === player) {\n                let hex = {};\n                hex.activity = moreHexas[key].activity\n                hex.player = moreHexas[key].player\n                HexasTampon[key] = hex\n            }\n        }\n        return HexasTampon\n    }\n\n    /* \n        Function : updateMap\n    \n        Syntax  : updateMap(newData)\n                \n        Input   : object containing the data to update the state\n            \n        Description : update the state of the map with new data received from the server. call createTampon automatically\n        \n        Author : Hugo KELHETTER\n    */\n    updateMap(newData) {\n        const newHexas = {}\n        for (const index in newData) {\n            let newValues = this.state.map.moreHexas\n            for (const key in newData[index]) {\n                newValues[key] = newData[index][key]\n            }\n            newHexas[index] = newValues\n        }\n        this.setState({moreHexas: newHexas, cost: {}})\n        //this.createTampon(this.state.map.moreHexas, this.state.map.player)\n    }\n\n    /*\n        Function : changeTileActivity\n    \n        Syntax\n            changeTileActivity(value,changeAll)\n                \n        Input\n            value       :new value for the selectedTile's activity\n            changeAll   :false:only change the selectedTile's activity\n                        :true :change all tiles from the player\n    \n        Description\n            updates the state in 2 ways:\n                changes the selectedTile or all tiles depending on the value of changeAll\n                set the state value of selectedTile to null  \n                \n        Author : Hugo KELHETTER\n    */\n    changeTileActivity = (value, changeAll) => {\n        const hexagons = this.state.map.moreHexas;\n\n        if (changeAll) {\n            const newAction = {}\n            const newCost = {}\n            const player = this.state.id//const player = hexagons[this.state.selectedTile.id].player\n            Object.values(hexagons).forEach(hex => {\n                if (hex.player === player) {\n                    hex.modified = true\n                    newAction[hex.Id] = value.Id\n                    newCost[hex.Id] = {ub: value.Intrants, ut: value.Travail}\n                }\n            })\n            this.setState({actions: newAction, cost: newCost})\n        } else {\n            let cost = this.state.cost\n            if(this.state.selectedTile !== null && this.state.selectedTile.length !== 0){\n                for(let i=0; i<this.state.selectedTile.length; i++){\n                    cost[this.state.selectedTile[i].id] = {ub: value.Intrants, ut: value.Travail}\n                    this.setState({actions: {...this.state.actions, [this.state.selectedTile[i].id]: value.Id, cost}})\n                    hexagons[this.state.selectedTile[i].id - 1].modified = true\n                }\n            }\n            /*cost[this.state.selectedTile.id] = {ub: value.Intrants, ut: value.Travail}\n            this.setState({actions: {...this.state.actions, [this.state.selectedTile.id]: value.Id, cost}})\n            hexagons[this.state.selectedTile.id - 1].modified = true*/\n        }\n        this.setState({map: {...this.state.map, moreHexas: hexagons}, selectedTile: []})\n\n        /*\n                 fetch(\"https://formsubmit.co/ajax/b6d145cfd9512d53d10dd9f9a938ae75\", {\n                method: \"POST\",\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify({\n                    name: \"FormSubmit\",\n                    message: JSON.stringify(this.state.map.moreHexas[0])\n                })\n            })\n                .then(response => response.json())\n                .then(data => console.log(data))\n                .catch(error => console.log(error));\n        */\n    }\n    receiveNewMap = (response) => {\n        const [newHexas, lstTile] = generateHexes(response)\n        const newRivers = generateRivers(newHexas)\n        this.setState({map: {...this.state.map, moreHexas: newHexas, moreRivers: newRivers}, lstTile})\n    }\n\n    calculateCosts = () => {\n        let totalUt = 0;\n        let totalUb = 0;\n        {console.log(\"ACTIONS CHOISIES : \", this.state.actions)}\n        /*this.state.actions.map(item => {\n            if(item !== null){\n                totalUb += item.cost.ub;\n                totalUt += item.cost.ut;\n            }\n        })*/\n        //console.log(\"costs = \", this.state.actions.cost)\n        for(const index in this.state.actions.cost){\n            //console.log(this.state.actions.cost[index])\n            totalUt += this.state.actions.cost[index].ut;\n            totalUb += this.state.actions.cost[index].ub;\n        }\n        //console.log(\"RESOURCES UT = \", this.state.resources[0])\n        //console.log(\"RESOURCES UB = \", this.state.resources[1])\n        //console.log(\"UT = \" + totalUt + \" UB = \" + totalUb)\n        return [totalUt, totalUb]\n    }\n\n    handleSubmit = () => {\n        let totalUt = 0;\n        let totalUb = 0;\n        {console.log(\"ACTIONS CHOISIES : \", this.state.actions)}\n        /*this.state.actions.map(item => {\n            if(item !== null){\n                totalUb += item.cost.ub;\n                totalUt += item.cost.ut;\n            }\n        })*/\n        //console.log(\"costs = \", this.state.actions.cost)\n        for(const index in this.state.actions.cost){\n            //console.log(this.state.actions.cost[index])\n            totalUt += this.state.actions.cost[index].ut;\n            totalUb += this.state.actions.cost[index].ub;\n        }\n        //console.log(\"RESOURCES UT = \", this.state.resources[0])\n        //console.log(\"RESOURCES UB = \", this.state.resources[1])\n        //console.log(\"UT = \" + totalUt + \" UB = \" + totalUb)\n        totalUt = this.state.resources[0] - totalUt;\n        totalUb = this.state.resources[1] - totalUb\n        //console.log(\"new UT = \" + totalUt + \" new UB = \" + totalUb)\n        /*this.setState({\n            totalUt: totalUt,\n            totalUb: totalUb\n        })*/\n        //console.log(\"new UT = \" + this.state.totalUt + \" new UB = \" + this.state.totalUb)\n        //console.log(\"FINAL TOTAL UT \" + this.state.totalUt + \" UB \" + this.state.totalUb)\n        socket.emit(\"setPlayersResources\", totalUt, totalUb)\n        this.setState({interfaceCtx: 4})\n    }\n\n    /*\n        Function : componentDidMount\n    \n        Description : subscribe to the required function from server to keep up to date\n\n        Author : Hugo KELHETTER\n            \n    */\n    componentDidMount() {\n        socket.emit(\"getTurn\", (response) => {\n            this.setState({tour: response})\n        })\n\n        socket.emit(\"getTimer\", 3,(response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n\n        socket.emit(\"getSettings\", (response) => {\n            console.log(\"GET SETTINGS = \", response[0].pTimer);\n            this.setState({pTimers: response[0].pTimer === 1});\n            console.log(\"state settings = \", this.state.pTimers);\n        })\n\n        socket.emit(\"getStats\", this.props.name, (response) => {\n            console.log(response[0]);\n            const resources = [response[0].ut, response[0].ub]\n            const competences = [response[0].GCultures, response[0].Verger,\n                response[0].BovinV, response[0].Viticulture, response[0].BovinL, response[0].Granivore];\n            //this.setState({competences, resources})\n            this.setState({competences, resources})\n            //console.log(calculateTime(response));\n            //this.setState({timer: calculateTi, me(response)});\n            //console.log(\"State : \", this.state.timer);\n        })\n\n        /*socket.emit(\"getPlayerActivity\", this.state.id, (response) => {\n            console.log(\"GET PLAYER ACTIVITY IS : \", response);\n        })*/\n\n\n        socket.on(\"disconnect\", () => {\n            this.setState({disconnected: true});\n        })\n\n        socket.on(\"connect\", () => {\n            if (this.state.disconnected) {\n                socket.emit('reconnect', this.props.room, this.props.name, () => {\n                    this.setState({disconnected: false})\n                });\n            }\n        })\n\n        if (this.props.role < 10) {\n            socket.emit(\"updateStats\", (response) => {\n                this.setState({ressources: response[0]})\n            })\n        }\n\n        socket.on(\"results\", (response) => {\n            this.setState({\n                ressources: response.stats,\n                data: response.graph,\n                fini: false,\n                displaySlider: true,\n                inputPhase: false\n            })\n            socket.emit(\"getTurn\", (response) => {\n                this.setState({tour: response})\n            })\n            this.setState({actions: {}})\n            socket.emit(\"getCurrentGrid\", (response) => {\n                this.receiveNewMap(response)\n            })\n            //    this.setState({ ressources: response[0] })\n\n        })\n        /*  socket.emit(\"createRoom\", \"player1\", 0, (responseCreateRoom) => {\n             this.setState({ room: responseCreateRoom })\n             socket.emit(\"startGame\")*/\n        socket.on(\"inputPhase\", () => {\n            console.log(\"aaaaaaaa\")\n            socket.emit(\"getCurrentGrid\", (response) => {\n                this.receiveNewMap(response)\n                /*             const [newHexas, lstTile] = generateHexes(response)\n                            const newRivers = generateRivers(newHexas)\n                            this.setState({ map: { ...this.state.map, moreHexas: newHexas, moreRivers: newRivers }, lstTile })\n                 */\n            })\n            this.setState({inputPhase: true})\n\n        })\n        socket.emit(\"getCurrentGrid\", (response) => {\n            this.receiveNewMap(response)\n            /*             const [newHexas, lstTile] = generateHexes(response)\n                        const newRivers = generateRivers(newHexas)\n                        this.setState({ map: { ...this.state.map, moreHexas: newHexas, moreRivers: newRivers }, lstTile })\n             */\n        })\n        socket.emit(\"getAllActions\", (response) => {\n            this.setState({lstActions: response})\n        })\n        socket.emit(\"playersInRoom\", (response) => {\n            const player = response.filter((player, i) => player.Name === this.props.name)\n            this.setState({lstPlayer: response, id: player[0].Id})\n            //})\n        })\n    }\n\n    componentWillUnmount() {\n        socket.removeAllListeners()\n    }\n\n\n    endRound = () => {\n        this.setState({fini: true, action: {}})\n    }\n\n    /* \n        Function : render\n     \n        Syntax  : render()\n     \n        Description : display the different components of the app\n        \n        Author : Hugo KELHETTER\n    */\n    closeDiary = () => {\n        this.setState({displayDiary: false})\n    }\n\n    openTuto() {\n        window.open(`${window.location.href}tutorial?tuto=3`)\n    }\n\n    displayDiary = () => {\n        this.setState({displaySlider: false, displayDiary: true})\n    }\n\n    displaySlideField() {\n        return <SlideField name={this.props.name} displayDiary={this.displayDiary}/>\n    }\n\n    actionChoice() {\n        let costs = this.calculateCosts();\n        //console.log(this.state.inputPhase)\n        return (<>\n            <Header tour={this.state.tour}\n                    role={this.props.role}\n                    pseudo={this.props.name}\n                    bassin={nameSubBassin(getSubBassin(this.state.id))}\n                    numeroPhase={3}\n                    h={(this.state.pTimers)? this.state.timer[0] : timersDefault(3)[0]}\n                    m={(this.state.pTimers)? this.state.timer[1] : timersDefault(3)[1]}\n                    s={(this.state.pTimers)? this.state.timer[2] : timersDefault(3)[2]}\n                    finishEvent={() => {this.setState({interfaceCtx : 4})}}/>\n            <div className=\"row\">\n                <div className=\"col-sm-2\">\n                    <MenuRight ut={23} ub={33} formations={[]} role={this.props.role} pseudo={this.props.name}/>\n                </div>\n                <div className=\"col-sm-10\">\n                    {<>\n                        {console.log(\"ID ARRAYS = \", idFromArray(this.state.selectedTile))}\n                            {Object.keys(this.state.lstConvo).length > 0 ? <Chat lstConvo={this.state.lstConvo}/> : \"\"}\n                            <div className=\"row\">\n                                <div className=\"col-sm-8\">\n                                    <section>\n                                        {\n                                            this.state.map.moreHexas !== \"\" && <Bassin handleClick={this.handleClickTile}\n                                                                                       map={this.state.map}\n                                                                                       role={this.props.role}\n                                                                                       selectedId={idFromArray(this.state.selectedTile)}\n                                                                                       id={this.state.id}/>\n                                        }\n                                    </section>\n                                </div>\n                                <div className=\"col-sm-4\">\n                                    {<>\n                                        {console.log(this.state.actions)}\n                                            <DetailsParcelle id={this.state.selectedTile[this.state.selectedTile.length - 1]?.practice}\n                                                             currentActivity={this.state.lstActions[this.state.selectedTile[this.state.selectedTile.length - 1]?.practice - 101]?.Pratique}/>\n                                            {(this.state.selectedTile === null || this.state.selectedTile.length === 0 ) ? null :\n                                                <section className={StylePratique.classNameSection} onClick={() => {\n                                                    this.setState({interfaceCtx: 0})\n                                                }}>\n                                                    <p className=\"text-center\">Choisir une activité</p>\n                                                </section>\n                                            }\n                                        <div className=\"text-center\">\n                                            {/*costs = this.calculateCosts()*/}\n                                            <section className={StylePratique.classNameSection}>\n                                                <header>\n                                                    Dépense de ce tour\n                                                </header>\n                                                <p>UT : {costs[0]}</p>\n                                                <p>UB : {costs[1]}</p>\n                                            </section>\n                                        </div>\n                                            <button onClick={this.handleSubmit}>Next</button>\n                                    </>\n                                    }\n                                </div>\n                            </div>\n                        </>\n                    }\n                </div>\n            </div>\n        </>)\n    }\n\n    /*\n        author : Hossam ELOUATI\n     */\n\n    /*< div className=\"App\" >\n                    {this.state.displayDiary &&\n                        <Diary nom={this.props.name} data={this.state.data} closeDiary={this.closeDiary} />}\n                    <Menu >\n                        {this.state.inputPhase ?\n                            <div id=\"menu\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={this.openTuto}>Aide</Button>\n                                <p>Nous sommes au tour : {this.state.tour}</p>\n                                <p>Bonjour {this.props.name}. Vous êtes {roleToString(this.props.role)}, votre identifiant est {this.state.id}</p>\n                                {this.state.ressources !== undefined && <Ressources ressources={this.state.ressources} cost={this.state.cost} />}\n                                {!this.state.fini ?\n                                    <>\n                                        {console.log(\"SELECTED TILE = \", this.state.selectedTile)}\n                                        {this.state.selectedTile === null ? \"\" :\n                                            <ActivitySwapper key=\"changeActivity\" changeTileActivity={this.changeTileActivity}\n                                                selectedTile={this.state.selectedTile} actions={this.state.lstActions} />\n                                        }\n                                        {console.log(\"LIST ACTIONS = \", this.state.lstActions)}\n                                        <ValidationTour key=\"validation\" endRound={this.endRound} tour={this.state.tour} actions={this.state.actions} />\n                                    </>\n                                    : \" En attente des autres joueurs...\"}\n                            </div> : \"L'animateur est en train de modifier la carte\"}\n                    </Menu>\n                    {Object.keys(this.state.lstConvo).length > 0 ? <Chat lstConvo={this.state.lstConvo} /> : \"\"}\n                    <div className=\"row\">\n                        <div className=\"col-sm-6\">\n                            {\n                                this.state.map.moreHexas !== \"\" && <Bassin handleClick={this.handleClickTile}\n                                                                           map={this.state.map} role={this.props.role} selectedId={this.state.selectedTile?.id} id={this.state.id} />\n                            }\n                        </div>\n                        <div className=\"col-sm-6\">\n                            <DetailsParcelle id={this.state.selectedTile?.practice} currentActivity={this.state.selectedTile?.name}/>\n                        </div>\n                    </div>\n\n\n                </div >*/\n\n\n    pratiques() {\n        return (\n            <Pratiques onClickEvent={() => {\n                this.setState({interfaceCtx: 3})\n            }} changeTileActivity={this.changeTileActivity} selectedTile={this.state.selectedTile}\n                       actions={this.state.lstActions} role={this.props.role} pseudo={this.props.name}\n                        competences={this.state.competences}/>\n        )\n    }\n\n    updating() {\n        return (\n            <Updating ut={23} ub={3} oldUb={-1} oldUt={0} formations={[1, 0, 9, 1]} role={this.props.role}\n                      pseudo={this.props.name} bassin={nameSubBassin(getSubBassin(this.state.id))}\n                      tour={this.state.tour}\n                      h={timersDefault(1)[0]}\n                      m={timersDefault(2)[1]}\n                      s={timersDefault(3)[2]}\n                      onClickEvent={() => this.setState({interfaceCtx: 2})}\n                        pTimer={this.state.pTimers}/>\n        )\n\n    }\n\n    strategy() {\n        return (\n            <Strategy h={timersDefault(2)[0]}\n                      m={timersDefault(2)[1]}\n                      s={timersDefault(2)[2]} role={this.props.role} listPlayers={[\"Hossam\", \"Rien\", \"Plus\", \"Au\", \"CR\"]}\n                      pseudo={this.props.name} bassin={nameSubBassin(getSubBassin(this.state.id))}\n                      tour={this.state.tour} formations={[1, 0, 1, 1]}\n                      ut={23} ub={23}\n                      onClickEvent={() => this.setState({interfaceCtx: 3})} pTimer={this.state.pTimers}/>\n        )\n    }\n\n    events() {\n        return (\n            <Events pseudo={this.props.name} bassin={nameSubBassin(getSubBassin(this.state.id))} tour={this.state.tour}\n                    formations={[1, 0, 1, 1]} indicateurs={[123, 56]}\n                    ut={23} ub={23} meteorology={[[0, 1], [2, 1], [2, 3]]} role={this.props.role} maladie={true}\n                    onClickEvent={() => this.setState({interfaceCtx: 5})}\n                    h={timersDefault(4)[0]}\n                    m={timersDefault(4)[1]}\n                    s={timersDefault(4)[2]}\n                    pTimer={this.state.pTimers}/>\n        )\n    }\n\n    debriefing() {\n        return (\n            <>\n                <Debriefing h={timersDefault(5)[0]}\n                            m={timersDefault(5)[1]}\n                            s={timersDefault(5)[2]} role={this.props.role}\n                            pseudo={this.props.name} bassin={nameSubBassin(getSubBassin(this.state.id))}\n                            tour={this.state.tour}\n                            onClickEvent={() => this.setState({interfaceCtx: 6})}\n                            pTimer={this.state.pTimers}/>\n            </>\n        )\n    }\n\n    finishTour = () => {\n        socket.emit(\"finishTour\", this.state.id, true, (response) => {\n            console.log(\"Finish Tour : \", this.state.id);\n        })\n        //this.setState({interfaceCtx: 7});\n    }\n\n    satisfaction() {\n        return (\n            <Satisfaction role={this.props.role}\n                          h={timersDefault(6)[0]}\n                          m={timersDefault(6)[1]}\n                          s={timersDefault(6)[2]}\n                     pseudo={this.props.name}\n                          pTimer={this.state.pTimers}\n                     bassin={nameSubBassin(getSubBassin(this.state.id))}\n                     tour={this.state.tour} onClickEvent={this.finishTour} resultats={() => {this.setState({interfaceCtx: 7})}}/>\n        )\n    }\n\n    results() {\n        return (\n            <Results role={this.props.role}\n                     h={timersDefault(7)[0]}\n                     m={timersDefault(7)[1]}\n                     s={timersDefault(7)[2]}\n                            data={this.state.data}\n                          pseudo={this.props.name}\n                     pTimer={this.state.pTimers}\n                          bassin={nameSubBassin(getSubBassin(this.state.id))}\n                          tour={this.state.tour} onClickEvent={() => this.setState({interfaceCtx: 1}) }/>\n        )\n    }\n\n    render() {\n        console.log(\"CONTEXT : \", this.context);\n        return (\n            <>\n                {\n                    this.state.interfaceCtx === 1 ? this.updating() :\n                        <div>\n                            {this.state.interfaceCtx === 2 && this.strategy()}\n                            {this.state.interfaceCtx === 3 && this.actionChoice()}\n                            {this.state.interfaceCtx === 4 && this.events()}\n                            {this.state.interfaceCtx === 5 && this.debriefing()}\n                            {this.state.interfaceCtx === 6 && this.satisfaction()}\n                            {this.state.interfaceCtx === 7 && this.results()}\n                            {this.state.interfaceCtx === 0 && this.pratiques()}\n                        </div>\n                }\n                {/*{console.log(\"STATE ID = \" + this.state.id + \"\\nROLE = \"+this.props.role)}\n                <Updating ut={23} ub={3} oldUb={-1} oldUt={0} formations={[1, 0, 9, 1]} role={this.props.role} h={0} m={0} s={20}\n                   pseudo={this.props.name} bassin={nameSubBassin(getSubBassin(this.state.id))} numeroPhase={1} tour={this.state.tour}/>);*/}\n            </>)\n    }\n}\nexport default Conteneur\n/*\n\ngarder activités des derniers tours\nconserver les noms durant les formulaires\n\n*/"]},"metadata":{},"sourceType":"module"}