{"ast":null,"code":"import _classCallCheck from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Style from\"./Updating.module.scss\";import ImageUp from\"./up.png\";import ImageDown from\"./down.png\";import ImageArgent from\"./argent.png\";import ImageTemps from\"./montre_circulaire.png\";import Header from\"../Header/Header\";import formationId from\"../utils/formationId\";import MenuRight from\"../MenuRight/MenuRight\";import{socket}from\"../../socket\";import calculateTime from\"../utils/calculateTime\";import Banque from\"../Banque/Banque\";import timersDefault from\"../../Game/TimersDefault\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Updating=/*#__PURE__*/function(_Component){_inherits(Updating,_Component);var _super=_createSuper(Updating);function Updating(props){var _this;_classCallCheck(this,Updating);_this=_super.call(this,props);_this.state={colonnes:[\"col-sm-12\",\"col-sm-6\",\"col-sm-4\",\"col-sm-3\"],imageUt:_this.props.oldUt>=0?ImageUp:ImageDown,imageUb:_this.props.oldUb>=0?ImageUp:ImageDown,timer:[],resources:[],competences:[],banque:false//isOn: false\n};//setTimeout( () => {this.setState({isOn: true})}, 5)\nreturn _this;}/*setTimer = () => {\n        socket.emit(\"getTimerUpdating\", (response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n    }*/_createClass(Updating,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket.emit(\"getTimer\",1,function(response){console.log(response);console.log(calculateTime(response));_this2.setState({timer:calculateTime(response)});console.log(\"State : \",_this2.state.timer);});socket.emit(\"getStats\",this.props.pseudo,function(response){console.log(response[0]);var resources=[response[0].ut,response[0].ub];var competences=[response[0].GCultures,response[0].Verger,response[0].BovinV,response[0].Viticulture,response[0].BovinL,response[0].Granivore];_this2.setState({competences:competences});_this2.setState({resources:resources});});}},{key:\"nombreElements\",value:function nombreElements(){var indice=0;for(var i=0;i<4;i++){if(this.state.competences[i]!==0){indice+=1;}}return indice;}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{tour:this.props.tour,pseudo:this.props.pseudo,bassin:this.props.bassin,role:this.props.role,numeroPhase:1,h:this.props.pTimer?this.state.timer[0]:timersDefault(1)[0],m:this.props.pTimer?this.state.timer[1]:timersDefault(1)[1],s:this.props.pTimer?this.state.timer[2]:timersDefault(1)[2],finishEvent:this.props.onClickEvent}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-2\",children:/*#__PURE__*/_jsx(MenuRight,{role:this.props.role,pseudo:this.props.pseudo,onClickBank:function onClickBank(){return _this3.setState({banque:true});}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:!this.state.banque?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:Style.Updating,children:[\"Vos ressources au d\\xE9but du tour :\",/*#__PURE__*/_jsxs(\"div\",{className:\"row text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"h2\",{className:Style.TextColor,children:[/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:ImageArgent}),\" UB : \",this.state.resources[1],\" \",/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:this.state.imageUb}),\" \",this.props.oldUb]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"h2\",{className:Style.TextColor,children:[/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:ImageTemps}),\" UT : \",this.state.resources[0],\" \",/*#__PURE__*/_jsx(\"img\",{className:Style.Image,src:this.state.imageUt}),\" \",this.props.oldUt]})})]}),this.props.role===1?/*#__PURE__*/_jsxs(\"div\",{children:[\"Vos niveaux de comp\\xE9tence :\",/*#__PURE__*/_jsx(\"div\",{className:\"row text-center\",children:this.state.competences.map(function(f,index){if(f!==0){return/*#__PURE__*/_jsxs(\"div\",{className:_this3.state.colonnes[_this3.nombreElements(_this3.state.competences)-1],children:[/*#__PURE__*/_jsxs(\"p\",{className:Style.TextColor,children:[\" \",formationId(index),\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:Style.TextDecor,children:[\" \",f,\" \"]})]});}})})]}):null]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.props.onClickEvent,className:\"btn btn-small btn-primary\",children:\"Next\"})]}):/*#__PURE__*/_jsx(Banque,{pseudo:this.props.pseudo,ut:this.state.resources[0],ub:this.state.resources[1],retour:function retour(){return _this3.setState({banque:false});}})})]})]});}}]);return Updating;}(Component);export{Updating as default};","map":{"version":3,"sources":["/home/elouati/Bureau/projet_working/client/src/Interface/Updating/Updating.js"],"names":["React","Component","Style","ImageUp","ImageDown","ImageArgent","ImageTemps","Header","formationId","MenuRight","socket","calculateTime","Banque","timersDefault","Updating","props","state","colonnes","imageUt","oldUt","imageUb","oldUb","timer","resources","competences","banque","emit","response","console","log","setState","pseudo","ut","ub","GCultures","Verger","BovinV","Viticulture","BovinL","Granivore","indice","i","tour","bassin","role","pTimer","onClickEvent","TextColor","Image","map","f","index","nombreElements","TextDecor"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport Style from \"./Updating.module.scss\";\nimport ImageUp from \"./up.png\";\nimport ImageDown from \"./down.png\";\nimport ImageArgent from \"./argent.png\";\nimport ImageTemps from \"./montre_circulaire.png\";\nimport Header from \"../Header/Header\";\nimport formationId from \"../utils/formationId\";\nimport MenuRight from \"../MenuRight/MenuRight\";\nimport {socket} from \"../../socket\";\nimport calculateTime from \"../utils/calculateTime\";\nimport Banque from \"../Banque/Banque\";\nimport timersDefault from \"../../Game/TimersDefault\";\n\n\nexport default class Updating extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            colonnes: [\"col-sm-12\", \"col-sm-6\", \"col-sm-4\", \"col-sm-3\"],\n            imageUt: (this.props.oldUt >= 0) ? ImageUp : ImageDown,\n            imageUb: (this.props.oldUb >= 0) ? ImageUp : ImageDown,\n            timer: [],\n            resources: [],\n            competences: [],\n            banque: false\n            //isOn: false\n        }\n\n        //setTimeout( () => {this.setState({isOn: true})}, 5)\n    }\n\n    /*setTimer = () => {\n        socket.emit(\"getTimerUpdating\", (response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n    }*/\n\n    componentDidMount() {\n        socket.emit(\"getTimer\", 1,(response) => {\n            console.log(response);\n            console.log(calculateTime(response));\n            this.setState({timer: calculateTime(response)});\n            console.log(\"State : \", this.state.timer);\n        })\n\n        socket.emit(\"getStats\", this.props.pseudo, (response) => {\n            console.log(response[0]);\n            const resources = [response[0].ut, response[0].ub]\n            const competences = [response[0].GCultures, response[0].Verger,\n                response[0].BovinV, response[0].Viticulture, response[0].BovinL, response[0].Granivore];\n            this.setState({competences});\n            this.setState({resources})\n        })\n    }\n\n    nombreElements() {\n        var indice = 0;\n        for(var i = 0; i < 4; i++){\n            if(this.state.competences[i] !== 0) {\n                indice += 1;\n            }\n        }\n        return indice;\n    }\n\n\n\n    render() {\n        return (\n            <>\n                <Header tour={this.props.tour} pseudo={this.props.pseudo} bassin={this.props.bassin} role={this.props.role} numeroPhase={1} h={(this.props.pTimer)? this.state.timer[0] : timersDefault(1)[0]}\n                        m={(this.props.pTimer)? this.state.timer[1] : timersDefault(1)[1]}\n                        s={(this.props.pTimer)? this.state.timer[2] : timersDefault(1)[2]}\n                    finishEvent={this.props.onClickEvent}/>\n                <div className=\"row\">\n                    <div className=\"col-sm-2\">\n                        <MenuRight role={this.props.role} pseudo={this.props.pseudo} onClickBank={() => this.setState({banque: true})}/>\n                    </div>\n                        <div className=\"col-sm-10\">\n                        {(!this.state.banque) ?\n                            <>\n                            <section className={Style.Updating}>\n                                Vos ressources au début du tour :\n                                <div className=\"row text-center\">\n                                    <div className=\"col-sm-6\">\n                                        <h2 className={Style.TextColor}>\n                                            <img className={Style.Image} src={ImageArgent}/> UB : {this.state.resources[1]} <img className={Style.Image} src={this.state.imageUb}/> {this.props.oldUb}\n                                        </h2>\n                                    </div>\n                                    <div className=\"col-sm-6\">\n                                        <h2 className={Style.TextColor}>\n                                            <img className={Style.Image} src={ImageTemps}/> UT : {this.state.resources[0]} <img className={Style.Image} src={this.state.imageUt}/> {this.props.oldUt}\n                                        </h2>\n                                    </div>\n                                </div>\n                                {this.props.role === 1 ? (<div>Vos niveaux de compétence :\n                                    <div className={\"row text-center\"}>{this.state.competences.map((f, index) =>\n                                        {if (f !== 0){\n                                            return (<div className={this.state.colonnes[this.nombreElements(this.state.competences)-1]}>\n                                                <p className={Style.TextColor}> {formationId(index)} </p>\n                                                <p className={Style.TextDecor}> {f} </p>\n                                            </div>  )\n                                        }}\n                                    )}</div></div>) : null}\n                            </section>\n                            <button onClick={this.props.onClickEvent} className={\"btn btn-small btn-primary\"}>Next</button>\n                            </>\n                        : <Banque pseudo={this.props.pseudo} ut={this.state.resources[0]} ub={this.state.resources[1]} retour={() => this.setState({banque: false})}/> }\n                        </div>\n                </div>\n            </>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}