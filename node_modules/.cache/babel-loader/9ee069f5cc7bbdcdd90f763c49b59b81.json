{"ast":null,"code":"import _slicedToArray from\"/home/elouati/Bureau/projet_working/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var time;var Time=function Time(props){var getValidDisplayTime=function getValidDisplayTime(hours,minutes,seconds){var tmp='';if(props.displayHours!==false){tmp=tmp+(hours/100).toFixed(2).slice(2);if(props.displayMinutes!==false){tmp=tmp+\":\";}}if(props.displayMinutes!==false){tmp=tmp+(minutes/100).toFixed(2).slice(2);if(props.displaySeconds!==false){tmp=tmp+\":\";}}if(props.displaySeconds!==false){tmp=tmp+(seconds/100).toFixed(2).slice(2);}return tmp;};var defaultTime;if(props.fromTime!==undefined){defaultTime=new Date(props.fromTime);}else{defaultTime=new Date(Date.now());}var _useState=useState(getValidDisplayTime(defaultTime.getHours(),defaultTime.getMinutes(),defaultTime.getSeconds())),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),idInterval=_useState4[0],setIdInterval=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isCount=_useState6[0],setIsCount=_useState6[1];var startStopwatch=function startStopwatch(){if(time===undefined){if(props.fromTime!==undefined){time=new Date(props.fromTime);}else{time=new Date(2000,0,0,0,0,0,0);}}var start=Date.now();var id=setInterval(function(){var delta=Date.now()-start;time.setMinutes(defaultTime.getMinutes());time.setHours(defaultTime.getHours());time.setSeconds(Math.floor(delta/1000)+defaultTime.getMinutes());props.hint(time.getSeconds());setText(getValidDisplayTime(time.getHours(),time.getMinutes(),time.getSeconds()));},1000);setIdInterval(id);};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFinished=_useState8[0],setIsFinished=_useState8[1];var startTimer=function startTimer(){var countDownDate=new Date(Date.now());countDownDate.setSeconds(countDownDate.getSeconds()+defaultTime.getSeconds()+1);countDownDate.setMinutes(countDownDate.getMinutes()+defaultTime.getMinutes());countDownDate.setHours(countDownDate.getHours()+defaultTime.getHours());var x=setInterval(function(){var now=new Date().getTime();var distance=countDownDate-now;if(distance<=0.01){clearInterval(x);setIsFinished(true);}console.log(\"Finished BOOLEAN : \"+isFinished);var hours=Math.floor(distance%(1000*60*60*24)/(1000*60*60));var minutes=Math.floor(distance%(1000*60*60)/(1000*60));var seconds=Math.floor(distance%(1000*60)/1000);props.hint(seconds);setText(getValidDisplayTime(hours,minutes,seconds));},1000);//setIsFinished(true);\n};if(isFinished===true){props.finishEvent();setIsFinished(false);}if(props.isOn===true&&isCount===false){if(props.watchType===\"timer\"){startTimer();}else if(props.watchType===\"stopwatch\"){startStopwatch();}setIsCount(true);}else if(props.isOn===false&&isCount===true){clearInterval(idInterval);}return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:text})});};export default Time;","map":{"version":3,"sources":["/home/elouati/Bureau/projet_working/client/src/Interface/utils/Timer/Component/Time/Time.js"],"names":["React","useState","time","Time","props","getValidDisplayTime","hours","minutes","seconds","tmp","displayHours","toFixed","slice","displayMinutes","displaySeconds","defaultTime","fromTime","undefined","Date","now","getHours","getMinutes","getSeconds","text","setText","idInterval","setIdInterval","isCount","setIsCount","startStopwatch","start","id","setInterval","delta","setMinutes","setHours","setSeconds","Math","floor","hint","isFinished","setIsFinished","startTimer","countDownDate","x","getTime","distance","clearInterval","console","log","finishEvent","isOn","watchType"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\n\nlet time;\n\nconst Time = (props) => {\n\n    const getValidDisplayTime = (hours, minutes, seconds) => {\n        let tmp = '';\n        if(props.displayHours !== false){\n            tmp = tmp + (hours/100).toFixed(2).slice(2);\n            if(props.displayMinutes !== false){\n                tmp = tmp + \":\"\n            }\n        }\n        if(props.displayMinutes !== false){\n            tmp = tmp + (minutes/100).toFixed(2).slice(2);\n            if(props.displaySeconds !== false){\n                tmp = tmp + \":\"\n            }\n        }\n        if(props.displaySeconds !== false){\n            tmp = tmp + (seconds/100).toFixed(2).slice(2);\n        }\n        return tmp\n    };\n\n    let defaultTime;\n\n    if(props.fromTime !== undefined){\n        defaultTime = new Date(props.fromTime);\n    }\n    else {\n        defaultTime = new Date(Date.now())\n    }\n\n    const [text, setText] = useState(getValidDisplayTime(defaultTime.getHours(),defaultTime.getMinutes(), defaultTime.getSeconds()));\n    const [idInterval, setIdInterval] = useState(0);\n    const [isCount, setIsCount] = useState(false);\n\n    const startStopwatch = () => {\n        if (time === undefined) {\n            if(props.fromTime !== undefined) {\n                time = new Date(props.fromTime);\n            }\n            else {\n                time = new Date(2000,0,0,0,0,0,0);\n            }\n        }\n        let start = Date.now();\n        const id = setInterval(function () {\n            const delta = Date.now() - start;\n            time.setMinutes(defaultTime.getMinutes());\n            time.setHours(defaultTime.getHours());\n            time.setSeconds(Math.floor(delta / 1000) + defaultTime.getMinutes());\n            props.hint(time.getSeconds());\n            setText(getValidDisplayTime(time.getHours(), time.getMinutes(), time.getSeconds()));\n        }, 1000);\n        setIdInterval(id)\n    };\n    const [isFinished, setIsFinished] = useState(false);\n    const startTimer = () => {\n        let countDownDate =new Date(Date.now());\n        countDownDate.setSeconds(countDownDate.getSeconds() +defaultTime.getSeconds() + 1);\n        countDownDate.setMinutes(countDownDate.getMinutes() + defaultTime.getMinutes());\n        countDownDate.setHours(countDownDate.getHours() + defaultTime.getHours());\n\n        const x = setInterval(function() {\n            const now = new Date().getTime();\n            const distance = countDownDate - now;\n            if (distance <= 0.01) {\n                clearInterval(x);\n                setIsFinished(true);\n            }\n            console.log(\"Finished BOOLEAN : \" + isFinished);\n            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n            const seconds = Math.floor((distance % (1000 * 60)) / 1000);\n            props.hint(seconds);\n            setText(getValidDisplayTime(hours,minutes,seconds));\n        }, 1000);\n        //setIsFinished(true);\n    };\n    if(isFinished === true) {\n        props.finishEvent();\n        setIsFinished(false);\n    }\n\n    if(props.isOn === true && isCount === false){\n        if(props.watchType === \"timer\"){\n            startTimer();\n        }\n        else if (props.watchType === \"stopwatch\"){\n            startStopwatch()\n        }\n        setIsCount(true);\n    }\n    else if (props.isOn === false && isCount === true) {\n        clearInterval(idInterval)\n    }\n\n    return(\n        <React.Fragment>\n            <div>{text}</div>\n        </React.Fragment>\n    )\n};\n\nexport default Time;"]},"metadata":{},"sourceType":"module"}